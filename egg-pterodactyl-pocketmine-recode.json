{"_comment":"DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO","meta":{"version":"PTDL_v2"},"exported_at":"2025-5-25T11:53:20+01:00","name":"PocketmineMP(Recode)","author":"vsrstudio@xonefg.xyz","description":"Pocketmine Egg\r\nby onekintaro and vsrstudio from swisscrafting.ch\r\nwith the nice help from #eggs Channel on Pelican Discord :)\nhttps://vsratudio.web.id","docker_images":{"ghcr.io/parkervcp/yolks:debian":"ghcr.io/parkervcp/yolks:debian"},"file_denylist":[],"startup":"./bin/php7/bin/php ./PocketMine-MP.phar --no-wizard","config":{"files":"{\r\n    \"server.properties\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"server-ip\": \"0.0.0.0\",\r\n            \"enable-query\": \"true\",\r\n            \"server-port\": \"{{server.build.default.port}}\",\r\n            \"query.port\": \"{{server.build.default.port}}\"\r\n        }\r\n    }\r\n}","startup":"{\r\n    \"done\": \")! \"\r\n}","logs":"{}","stop":"stop"},"scripts":{"installation":{"script":"#!/bin/bash\n\napt-get update\napt-get install -y git curl wget jq file tar unzip zip\n\nmkdir -p /mnt/server/\ncd /mnt/server || exit 1\n\nARCH=$([[ \"$(uname -m)\" == \"x86_64\" ]] && echo \"x86_64\" || echo \"arm64\")\n\nVERSION=\"${VERSION:-PM5}\"\nVERSION=\"${VERSION^^}\"\n\n# Function for downloading PHP binaries\n\ndownload_php_binary() {\n  local php_binary_url\n  if [[ \"$VERSION\" == \"PM5\" ]]; then\n    php_binary_url=\"https://github.com/pmmp/PHP-Binaries/releases/download/pm5-latest/PHP-8.2-Linux-${ARCH}-PM5.tar.gz\"\n  elif [[ \"$VERSION\" == \"PM4\" ]]; then\n    php_binary_url=\"https://github.com/pmmp/PHP-Binaries/releases/download/pm4-latest/PHP-8.1-Linux-${ARCH}-PM4.tar.gz\"\n  else\n    echo \"Unsupported PHP binary version: $VERSION\"\n    exit 1\n  fi\n  echo \"Downloading PHP binary for $VERSION from $php_binary_url\"\n  curl --location --progress-bar \"$php_binary_url\" | tar -xzv\n}\n\n# Set extension_dir in php.ini\n\nset_php_extension_dir() {\n  echo \"Configuring php.ini\"\n  EXTENSION_DIR=$(find \"bin\" -name '*debug-zts*')\n  grep -q '^extension_dir' bin/php7/bin/php.ini && \\\n  sed -i'bak' \"s{^extension_dir=.*{extension_dir=\\\"$EXTENSION_DIR\\\"{\" bin/php7/bin/php.ini || \\\n  echo \"extension_dir=\\\"$EXTENSION_DIR\\\"\" >>bin/php7/bin/php.ini\n}\n\n# Download official PMMP phar\n\ndownload_pmmp() {\n  API_CHANNEL=\"\"\n  if [[ \"$VERSION\" == \"PM5\" ]]; then\n    API_CHANNEL=\"stable\"\n  elif [[ \"$VERSION\" == \"PM4\" ]]; then\n    API_CHANNEL=\"4\"\n  fi\n  DOWNLOAD_LINK=$(curl -sSL \"https://update.pmmp.io/api?channel=$API_CHANNEL\" | jq -r '.download_url')\n  echo \"Downloading $VERSION from $DOWNLOAD_LINK\"\n  curl --location --progress-bar \"$DOWNLOAD_LINK\" --output PocketMine-MP.phar\n}\n\n# New function: Download BetterAltay (BA)\ndownload_betteraltay() {\n  echo \"Downloading BetterAltay release...\"\n  curl -sSL https://github.com/Benedikt05/BetterAltay/releases/download/1.30.0/BetterAltay.phar -o BetterAltay.phar\n\n  echo \"Renaming BetterAltay.phar to PocketMine-MP.phar\"\n  mv BetterAltay.phar PocketMine-MP.phar\n\n  echo \"Downloading PHP binary for PM5...\"\n  download_php_binary\n  set_php_extension_dir || exit 1\n}\n\n# New function: Clone & build NetherGamesMC PocketMine (varian NG)\n\ndownload_nethergames() {\n  echo \"Cloning NetherGamesMC PocketMine-MP repository...\"\n  git clone --recursive https://github.com/NetherGamesMC/PocketMine-MP.git .\n\n  echo \"Installing dependencies...\"\n  apt-get update\n  apt-get install -y php-cli php-curl php-zip php-mbstring php-xml php-json php-gd php-sockets php-openssl php-pdo-mysql unzip git curl wget unzip zip tar jq file\n\n  echo \"Installing Composer...\"\n  curl -sS https://getcomposer.org/installer | php\n  mv composer.phar /usr/local/bin/composer\n\n  echo \"Running Composer install...\"\n  composer install --no-dev --classmap-authoritative\n\n  echo \"Building PocketMine-MP.phar...\"\n  composer make-server\n}\n\nif [[ \"$VERSION\" == \"NG\" ]]; then\n  download_nethergames\nelif [[ \"$VERSION\" == \"BA\" ]]; then\n  download_betteraltay\nelif [[ \"$VERSION\" == \"PM5\" || \"$VERSION\" == \"PM4\" ]]; then\n  REQUIRED_PHP_VERSION=$(curl -sSL \"https://update.pmmp.io/api?channel=${VERSION,,}\" | jq -r '.php_version')\n\n  if [[ \"$ARCH\" == \"x86_64\" ]]; then\n    download_php_binary\n  else\n    apt-get install -y make autoconf automake m4 bzip2 bison g++ cmake pkg-config re2c libtool-bin\n\n    mkdir -p /mnt/server/build_cache/archives\n    mkdir -p /mnt/server/build_cache/compilation\n\n    echo \"Downloading compile.sh for PHP version $REQUIRED_PHP_VERSION\"\n    curl --location --progress-bar --remote-name https://raw.githubusercontent.com/pmmp/PHP-Binaries/latest/compile.sh\n    chmod +x compile.sh\n\n    echo \"Compiling PHP binary, this will take some time...\"\n    THREADS=$(grep -c ^processor /proc/cpuinfo || echo 1)\n    ./compile.sh -j \"$THREADS\" -c /mnt/server/build_cache/archives -l /mnt/server/build_cache/compilation -z \"$REQUIRED_PHP_VERSION\"\n\n    rm compile.sh\n    rm -rf install_data/\n  fi\n\n  download_pmmp\n  set_php_extension_dir || exit 1\nelse\n  echo \"Unsupported version: $VERSION\"\n  exit 1\nfi\n\nif [[ ! -f server.properties ]]; then\n  echo \"Downloading default server.properties template\"\n  curl --location --progress-bar --remote-name https://raw.githubusercontent.com/parkervcp/eggs/master/game_eggs/minecraft/bedrock/pocketmine_mp/server.properties\nfi\n\necho \"Creating default file and folder structure\"\ntouch banned-ips.txt banned-players.txt ops.txt white-list.txt server.log\nmkdir -p players worlds plugins resource_packs\n\necho \\\"----------------------------------------\\\"\\necho \\\"|                                      |\\\"\\necho \\\"|   PocketMine-MP NetherGames Installed |\\\"\\necho \\\"|                                      |\\\"\\necho \\\"----------------------------------------\\\"\\n","container":"ghcr.io/parkervcp/installers:debian","entrypoint":"bash"}},"variables":[{"name":"Version to install","description":"Latest PocketMine version to install.","env_variable":"VERSION","default_value":"PM5","user_viewable":true,"user_editable":true,"rules":"required|string|in:PM5,PM4,NG,BA","field_type":"text"}]}